{%- style -%}
  .section-{{ section.id }}-padding {
    padding-top: {{ section.settings.padding_top | times: 0.75 | round: 0 }}px;
    padding-bottom: {{ section.settings.padding_bottom | times: 0.75 | round: 0 }}px;
  }
  @media screen and (min-width: 750px) {
    .section-{{ section.id }}-padding {
      padding-top: {{ section.settings.padding_top }}px;
      padding-bottom: {{ section.settings.padding_bottom }}px;
    }
  }
{%- endstyle -%}

{%- style -%}
    .recomends-view {
      width: 100%;
      max-width: {{ settings.page_width }}px;
      margin: 0 auto;
      padding: 0 2rem;
    }
    @media screen and (min-width: 750px) {
      .recomends-view {
        padding: 0 5rem;
      }
    }
    .recomends-view__wrapper {
      position: relative;
      height: 100%;
      width: 100%;
      margin-bottom: 3rem;
    }


    /*
     .recomends-view__bg {
     display: block !important;
     position: absolute;
     top: 0;
     right: 0;
     left: 15%;
     bottom: 5%;
     width: auto;
     background: {{ section.settings.accent_color }};
     border-top-left-radius: 32px;
     border-bottom-left-radius: 32px;
     box-shadow: 0 0 10px rgba(0, 0, 0, 0.4);
     z-index: -1;
     }
  */

    .recomends-product-grid {
      display: grid;
      grid-template-columns: 1fr;
      grid-gap: 2rem;
      width: 100%;
      margin-bottom: 4rem;
    }
    .product-item {
      display: block;
      color: inherit;
      text-decoration: none;
      box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
      border-radius: 8px;
      overflow: hidden;
      height: min-content;
      background: white;
      transition: all 0.4s ease;
      height: 100%;
    }
    .product-item:hover {
      transform: translateY(-2px);
    }
    .product-item__inner {
      height: 600px;
      border-bottom-left-radius: 1000px 600px;
      border-bottom-right-radius: 1000px 600px;
      height: 230px;
      margin-left: -100px;
      margin-right: -100px;
      padding-left: 100px;
      padding-right: 100px;
      display: flex;
      justify-content: center;
      align-items: center;
      box-shadow: 0 0 4px rgba(0, 0, 0, 0.3);
    }
    .product-item img {
      width: 100%;
      height: auto;
      max-width: 250px;
    }
    .product-item__info {
      margin-top: 1rem;
      padding: 0 1rem;
      margin-bottom: 1rem;
    }
    .product-item__info h2 {
      font-size: 1.7rem;
      letter-spacing: 0.3rem;
      font-weight: bold;
      margin: 1rem 0;
    }
    .product-item__info p {
      margin: 0;
      font-size: 1.3rem;
    }
    .product-item__info span {
      margin-top: 0.5rem;
      display: block;
      padding: 0.4rem 1.2rem;
      width: fit-content;
      font-size: 1.2rem;
      letter-spacing: 0.2rem;
      border-radius: 999px;
      color: darkgreen;
      border: 1px solid darkgreen;
    }
    .viewmore-link__container {
      display: flex;
      justify-content: flex-end;
      width: 100%;
    }
    .icon-container {
      width: 2rem;
      height: 2rem;
      margin-top: 0.5rem;
    }
    .recomends-products__head {
      display: flex;
      justify-content: end;
      align-items: center;
      font-size: 1.6rem;
      color: gray;
      line-height: 1.5;
      margin: 0;
      padding: 0;
      font-weight: 200;
      margin-bottom: 1rem;
      letter-spacing: 1px;
    }
    .recomends-product__banner {
      width: 100%;
      height: auto;
      transition: all 0.4s ease;
    }

    .recomends-product__banner:hover {
      transform: translateY(-2px);
    }
    .recomends-product__banner img {
      width: 100%;
      height: auto;
      object-fit: cover;
    }
    .recomends-product__block-link {
      margin-top: 1.2rem;
      display: block;
      width: 100%;
    }
    .recomends-product__block-link__text {
      margin-top: 1.5rem;
      display: flex;
      justify-content: space-between;
      font-size: 1.8rem;
      color: black;
      text-decoration: none;
      padding: 1rem 1.5rem;
      margin-top: 1.5rem;
      border-radius: 8px;
      width: 100%;
      background: white;
      margin-bottom: 1rem;
      transition: all 0.4s ease;
      box-shadow: 0 0 10px rgba(0, 0, 0, 0.3);
    }

    .recomends-product__block-link__text:hover {
      transform: translateY(-2px);
    }
    .recomends-product__banner-text {
      display: inline-flex;
      align-items: center;
      width: auto;
      margin-right: 1rem;
      text-decoration: none;
      overflow: hidden;
      border-radius: 8px;
      margin-top: 1.5rem;
      padding: 0.5rem 1.5rem;
      transition: all 0.4s ease;
    }
    .recomends-product__banner-text:hover {
      transform: translateY(-2px);
    }

    .recomends-product__banner-text p {
      font-size: 1.5rem;
      line-height: 1.5;
      margin: 0;
    }
    .recomends-product__banner-text span {
      margin-left: 1rem;
    }
    .product-item__info-price {
      font-size: 1.7rem !important;
      letter-spacing: 2px;
      color: black;
      padding-bottom: 0.5rem;
      text-decoration: underline;
    }
    @media screen and (min-width: 750px) {
      .product-item__inner {
        min-height: 270px;
      }
      .recomends-product-grid {
        grid-template-columns: 1fr 1fr 1fr;
      }
      .recomends-products__head {
        justify-content: space-around;
        font-size: 1.8rem;
      }
    }
    @media screen and (min-width: 1000px) {
      .recomends-product__block-link__text {
        width: 30%;
        margin-left: 2rem;
        font-size: 2rem;
      }
      .custom__heading {
        padding: 0 5rem;
      }
      .recomends-products__head {
        font-size: 2.3rem;
        justify-content: start;
        padding-left: 15%;
      }
      .custom__heading h2 {
        font-size: 2.5rem;
      }
      .custom__heading span {
        font-size: 1.8rem;
      }
      .product-item__inner {
        min-height: 270px;
      }
      .recomends-product-grid {
        grid-template-columns: 1fr 1fr 1fr 1fr 1fr;
      }
    }
{%- endstyle -%}

{% assign current_path = request.path %}
{% assign path_parts = current_path | split: '/' %}
{% assign country_code = path_parts[1] %}

<div class="color-{{ section.settings.color_scheme }} isolate gradient">
  <div class="section-{{ section.id }}-padding">
    <div class="section-head page_width scroll-trigger animate--slide-in">
      <h2>{{ section.settings.heading }}</h2>
      <span>{{ section.settings.subheading }}</span>
    </div>
    <didv class="recomends-view__wrapper">
      <div class="recomends-view__bg"></div>
      <div class="recomends-view">
        <div class="recomends-products__head">
          {{ section.settings.description }}
        </div>
        <div class="recomends-product-grid">
          {%- assign colors = section.settings.backround_color_str | split: ',' -%}
          {% for product in collections[section.settings.products].products limit: 5 %}
            {%- assign color = colors[forloop.index0] -%}
            <a href="{{ product.url }}" class="product-item">
              <div class="product-item__inner" style="background: {{ color }}">
                <img
                  src="{{ product.featured_image | img_url: 'master' }}"
                  alt="{{ product.title }}"
                  height="800"
                  width="800"
                >
              </div>
              <div class="product-item__info">
                {%- assign catchCopy = product.metafields.custom.catch_copy -%}
                {% if catchCopy %}
                  <span>{{ catchCopy }}</span>
                {% endif %}
                <h2>{{ product.title }}</h2>
                <p class="product-item__info-price">{{ product.price | money_without_trailing_zeros }}</p>
                <p>{{ product.description | strip_html | truncate: 120 }}</p>
              </div>
            </a>
          {% endfor %}
        </div>

        <style>
          .recomends-view__banner-box {
            display: flex;
            gap: 2rem;
          }
          @media screen and (max-width: 500px) {
            .recomends-view__banner-box {
              flex-direction: column;
               gap: 0rem;
            }
          }
        </style>

        <div class="recomends-view__banner-box">
          {% for block in section.blocks %}
            {% case block.type %}
              {% when 'image-banner' %}
                <a class="recomends-product__block-link" href="{{ block.settings.banner_link }}">
                  <div class="recomends-product__banner">
                    {% if block.settings['pc_banner_image-jp'] %}
                      {% if country_code == 'en' %}
                        <picture>
                          <source
                            media="(max-width: 640px)"
                            srcset="{{ block.settings.sp_banner_image-en | image_url }}"
                            width="804"
                            height="420"
                          >
                          <source
                            media="(min-width: 641px)"
                            srcset="{{ block.settings.pc_banner_image-en | image_url }}"
                            width="1440"
                            height="346"
                          >
                          <img
                            src="{{ block.settings.pc_banner_image-en | image_url }}"
                            alt="Banner Image"
                            width="1440"
                            height="346"
                          >
                        </picture>

                      {% elsif country_code == 'zh' %}
                        <picture>
                          <source
                            media="(max-width: 640px)"
                            srcset="{{ block.settings.sp_banner_image-zh | image_url }}"
                            width="804"
                            height="420"
                          >
                          <source
                            media="(min-width: 641px)"
                            srcset="{{ block.settings.pc_banner_image-zh | image_url }}"
                            width="1440"
                            height="346"
                          >
                          <img
                            src="{{ block.settings.pc_banner_image-zh | image_url }}"
                            alt="Banner Image"
                            width="1440"
                            height="346"
                          >
                        </picture>
                      {% else %}
                        <picture>
                          <source
                            media="(max-width: 640px)"
                            srcset="{{ block.settings.sp_banner_image-jp | image_url }}"
                            width="804"
                            height="420"
                          >
                          <source
                            media="(min-width: 641px)"
                            srcset="{{ block.settings.pc_banner_image-jp | image_url }}"
                            width="1440"
                            height="346"
                          >
                          <img
                            src="{{ block.settings.pc_banner_image-jp | image_url }}"
                            alt="Banner Image"
                            width="1440"
                            height="346"
                          >
                        </picture>
                      {% endif %}
                    {% else %}
                      <picture>
                        <source
                          media="(max-width: 640px)"
                          srcset="https://via.placeholder.com/804x420"
                          width="804"
                          height="420"
                        >
                        <source
                          media="(min-width: 641px)"
                          srcset="https://via.placeholder.com/1440x346"
                          width="1440"
                          height="346"
                        >
                        <img
                          src="https://via.placeholder.com/1440x346"
                          alt="placeholder"
                          width="1440"
                          height="346"
                        >
                      </picture>
                    {% endif %}
                  </div>
                </a>
            {% endcase %}
          {% endfor %}
        </div>
      </div>
    </didv>
  </div>
</div>

{% schema %}
{
  "name": "Recomends View",
  "tag": "section",
  "settings": [
    {
      "type": "text",
      "id": "heading",
      "default": "Heading Text",
      "label": "タイトル"
    },
    {
      "type": "text",
      "id": "subheading",
      "default": "Subheading Text",
      "label": "サブタイトル"
    },
    {
      "type": "color_scheme",
      "id": "color_scheme",
      "label": "t:sections.all.colors.label",
      "info": "t:sections.all.colors.has_cards_info",
      "default": "scheme-1"
    },
    {
      "type": "range",
      "id": "padding_top",
      "min": 0,
      "max": 100,
      "step": 4,
      "unit": "px",
      "label": "t:sections.all.padding.padding_top",
      "default": 36
    },
    {
      "type": "range",
      "id": "padding_bottom",
      "min": 0,
      "max": 100,
      "step": 4,
      "unit": "px",
      "label": "t:sections.all.padding.padding_bottom",
      "default": 36
    },
    {
      "type": "collection",
      "id": "products",
      "label": "Products"
    },
    {
      "type": "html",
      "id": "description",
      "label": "Description",
      "default": "<p>オールインワンゲルで、<br/>簡単にスキンケアができます。</p>"
    },
    {
      "type": "text",
      "id": "backround_color_str",
      "label": "背景の色",
      "default": "#F6F5F2,#F0EBE3,#F3D0D7,#FFEFEF,#FEECE2,#F7DED0,#E2BFB3",
      "info": "商品の数だけ色を設定してください。"
    },
    {
      "type": "color",
      "id": "accent_color",
      "label": "Accent Color",
      "default": "#F6F5F2"
    }
  ],
  "blocks": [
    {
      "type": "image-banner",
      "name": "Image Banner",
      "limit": 2,
      "settings": [
        {
          "type": "image_picker",
          "id": "pc_banner_image-jp",
          "label": "PC-日本語 Banner Image",
          "info": "設定する画像は1440x346pxの画像を設定して下さい。"
        },
        {
          "type": "image_picker",
          "id": "sp_banner_image-jp",
          "label": "SP 日本語　Banner Image",
          "info": "設定する画像は335x168pxの画像を設定して下さい。"
        },
        {
          "type": "image_picker",
          "id": "pc_banner_image-en",
          "label": "PC-英語 Banner Image",
          "info": "設定する画像は1440x346pxの画像を設定して下さい。"
        },
        {
          "type": "image_picker",
          "id": "sp_banner_image-en",
          "label": "SP-英語　Banner Image",
          "info": "設定する画像は335x168pxの画像を設定して下さい。"
        },
        {
          "type": "image_picker",
          "id": "pc_banner_image-zh",
          "label": "PC-簡体字 Banner Image",
          "info": "設定する画像は1440x346pxの画像を設定して下さい。"
        },
        {
          "type": "image_picker",
          "id": "sp_banner_image-zh",
          "label": "SP-簡体字 Banner Image",
          "info": "設定する画像は335x168pxの画像を設定して下さい。"
        },
        {
          "type": "url",
          "id": "banner_link",
          "label": "Banner Link"

        }
      ]
    }
  ],
  "presets": [
    {
      "name": "Recomends View",

      "settings": {}
    }
  ]
}
{% endschema %}
